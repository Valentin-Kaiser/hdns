<ion-header>
  <ion-toolbar>
    <ion-img src="/assets/hdns.png" slot="start" class="header-logo"></ion-img>
    @if (current?.ip) {
    <ion-chip color="light" slot="end" outline class="address-chip ion-hide-sm-down">
      <ion-icon name="globe-outline"></ion-icon>
      <ion-label>{{ current.ip }}</ion-label>
    </ion-chip>
    }
    <ion-buttons slot="end">
      <ion-button fill="clear" class="ion-hide-sm-up" [disabled]="!current?.ip">
        <ion-icon name="globe-outline"></ion-icon>
      </ion-button>
      <ion-button fill="clear" (click)="toggleLogs()" title="View Logs" [color]="showLogs ? 'primary' : ''"
        [disabled]="record">
        <ion-icon name="document-text-outline"></ion-icon>
      </ion-button>
      <ion-button fill="clear" (click)="toggleConfig()" title="Configuration" [color]="showConfig ? 'primary' : ''"
        [disabled]="record">
        <ion-icon name="settings-outline"></ion-icon>
      </ion-button>
      <ion-button fill="clear" (click)="refresh()" [disabled]="isRefreshing">
        <ion-icon name="refresh-outline" [class.spin]="isRefreshing"></ion-icon>
      </ion-button>
    </ion-buttons>
  </ion-toolbar>
</ion-header>

<ion-content [fullscreen]="true">
  <!-- Background Blur Backdrop -->
  @if (hasActiveModal) {
  <div class="backdrop-blur" (click)="closeActiveForm()"></div>
  }

  <ion-grid class="ion-no-padding ion-no-margin">
    <!-- Record Form -->
    @if (record) {
    <app-record-form [record]="record" [isLoading]="isLoading" (recordCreated)="onRecordCreated($event)"
      (recordUpdated)="onRecordUpdated($event)" (cancelled)="cancel()">
    </app-record-form>
    }

    <!-- Configuration Section -->
    @if (showConfig) {
    <app-configuration [showConfig]="showConfig" [config]="config" [isLoadingConfig]="isLoadingConfig"
      [isSavingConfig]="isSavingConfig" (closed)="toggleConfig()" (configSaved)="onConfigSaved($event)">
    </app-configuration>
    }

    <!-- Logs Section -->
    @if (showLogs) {
    <app-log [showLogs]="showLogs" [logs]="logs" [isLoadingLogs]="isLoadingLogs" [isRefreshingLogs]="isRefreshingLogs"
      (closed)="toggleLogs()" (logsRefreshed)="onLogsRefreshed($event)">
    </app-log>
    }

    @if (!hasActiveModal) {
    <!-- Record Cards -->
    <app-record [records]="records" [current]="current" (addRecord)="addRecord()"
      (editRecord)="editRecordAction($event)" (deleteRecord)="deleteRecord($event)"
      (refreshRecord)="refreshRecord($event)">
    </app-record>
    }

  </ion-grid>
</ion-content>
